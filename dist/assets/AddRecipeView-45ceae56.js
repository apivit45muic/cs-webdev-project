import{o as c,c as d,a as e,r as p,w as m,b as i,v as r,F as y,d as k,e as R,u as I,g as U,f as C,h as T,s as V}from"./index-d3c315e1.js";function D(b,u){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})])}const L={class:"container mx-auto px-4 py-6",style:{"max-width":"768px"}},N=e("h1",{class:"text-2xl font-bold mb-4"},"Add New Recipe",-1),B={class:"mx-auto"},$=["onSubmit"],A=e("label",{class:"block mb-2 font-semibold"},"Recipe Title",-1),E=e("label",{class:"block mb-2 font-semibold"},"Ingredients",-1),F=["onUpdate:modelValue"],M=["onClick"],S=["onClick"],P=e("label",{class:"block mb-2 font-semibold"},"Instructions",-1),j=e("label",{class:"block mb-2 font-semibold"},"Cooking Time",-1),H=e("label",{class:"block mb-2 font-semibold"},"Upload Image",-1),q=e("div",{class:"mt-4"},[e("button",{type:"submit",class:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"}," Submit Recipe ")],-1),G={__name:"AddRecipeView",setup(b){const u=p(""),t=p({title:"",ingredients:[""],instructions:"",cookingTime:"",imageUrl:"",rating:0}),v=()=>{t.value.ingredients.push("")},f=o=>{t.value.ingredients.splice(o,1)},a=p(null),h=o=>{a.value=o.target.files[0],console.log("Image selected:",a.value)},w=async()=>{if(console.log("Uploading Image"),!a.value){alert("No image selected");return}const o=`${new Date().getTime()}-${a.value.name}`,n=R(V,`recipes/${o}`);try{const l=await I(n,a.value);console.log("Uploaded a blob or file!");const s=await U(l.ref);console.log("File available at",s),t.value.imageUrl=s,u.value=s}catch(l){console.error("Error uploading file:",l)}},x=async()=>{const o=getDatabase(),n=dbRef(o,"recipes");try{const l=await push(n,t.value);console.log("New recipe added with ID:",l.key),router.push("/")}catch(l){console.error("Error adding recipe:",l)}},_=async()=>{if(console.log("Adding Recipe"),!t.value.title||!t.value.ingredients.length||!t.value.instructions||!t.value.cookingTime){alert("Please complete all fields.");return}if(!u.value){alert("Please upload an image.");return}try{await x()}catch(o){console.error("Error submitting recipe: ",o)}};return(o,n)=>(c(),d("div",L,[N,e("div",B,[e("form",{onSubmit:m(_,["prevent"]),class:"space-y-4"},[e("div",null,[A,i(e("input",{"onUpdate:modelValue":n[0]||(n[0]=l=>t.value.title=l),type:"text",placeholder:"Recipe Title",class:"w-full px-3 py-2 border rounded"},null,512),[[r,t.value.title]])]),e("div",null,[E,(c(!0),d(y,null,k(t.value.ingredients,(l,s)=>(c(),d("div",{key:s,class:"relative mb-2"},[i(e("input",{"onUpdate:modelValue":g=>t.value.ingredients[s]=g,type:"text",placeholder:"Ingredient",class:"w-full px-3 py-2 border rounded pr-10"},null,8,F),[[r,t.value.ingredients[s]]]),e("button",{onClick:m(g=>f(s),["prevent"]),class:"absolute inset-y-0 right-0 px-3 text-red-500"},[C(T(D),{class:"w-5 h-5"})],8,M)]))),128)),e("div",null,[e("button",{onClick:m(v,["prevent"]),class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Add Ingredient ",8,S)])]),e("div",null,[P,i(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=l=>t.value.instructions=l),rows:"4",placeholder:"Cooking instructions",class:"w-full px-3 py-2 border rounded"},null,512),[[r,t.value.instructions]])]),e("div",null,[j,i(e("input",{"onUpdate:modelValue":n[2]||(n[2]=l=>t.value.cookingTime=l),type:"text",placeholder:"e.g., 30 minutes",class:"w-full px-3 py-2 border rounded"},null,512),[[r,t.value.cookingTime]])]),e("div",null,[H,e("input",{type:"file",ref:"myfile",onChange:h,class:"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"},null,544)]),e("button",{type:"button",onClick:w,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Upload Image "),q],40,$)])]))}};export{G as default};
